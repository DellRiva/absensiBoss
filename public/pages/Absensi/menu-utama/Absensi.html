<template>
    <div class="page light">
        <div class="page-content">
            <div class="fab fab-extended fab-right-bottom ">
                <a href="/tambahabsensi/" class="bg-template">
                  <i class="fas fa-plus text-color-white"></i>
                </a>
            </div>
            <div class="appbar">
                <div class="appbar-inner">
                    <a href="#" class="left back padding-left"><i class="material-icons link">arrow_back</i></a>
                   <div class="title"><h5 class="page-subtitle mb-4">Absensi</h5></div>
                   <div class="right">
                       <a href="#" @click="back"  class="link icon-only">
                           <i class="material-icons">search</i>
                       </a>
                   </div>
                </div>
            </div>
            <div class="block px-0 my-0">
                <div class="toolbar tabbar toolbar-top mb-0 mt-0 no-shadow">
                    <div class="toolbar-inner">
                        <a class="button tab-link tab-link-active text-align-center" href="#tab11">Menunggu</a>
                        <a class="button tab-link text-align-center" href="#tab22">Diterima</a>
                        <a class="button tab-link text-align-center" href="#tab33">Ditolak</a>
                    </div>
                  </div>
            </div>
            <div class="tabs">
                <div class="tab tab-active" id="tab11">
                    <div class="block mt-0">
                        <div class="list no-margin-vertical">
                            <ul>
                                {{#each menunggu}}
                                <li>
                                    <div class="card padding-vertical">
                                        <a href="/detailMenunggu/">
                                        <div class="row mx-0 width-100 align-items-center">
                                            <div class="col-auto pr-0 align-self-center">
                                                <h6 class="font-weight-normal mb-2 mt-1" style="color: black;">{{karyawan}}</h6>
                                                <div class="calendar-row">
                                                    <div class="col mt-1">
                                                        <p class="text-mute medium text-secondary mt-1">{{alasan_absensi}}</p>
                                                    </div>
                                                    <div class="col mx-2 mt-1">
                                                        <div class="chip mx-0">
                                                            <div class="chip-label">{{jumlah_hari}} hari</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <h6 class="text-mute mt-1"  style="color:gray">{{dari_tg}} - {{sampai_tg}}</6>
                                            </div>
                                        </div>
                                        </a>
                                    </div>
                                </li>
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="tab" id="tab22">
                    <div class="block mt-0">
                        <div class="list no-margin-vertical">
                            <ul>
                                {{#each diterima}}
                                    <li>
                                        <div class="card padding-vertical">
                                            <a href="/detailDiterima/">
                                            <div class="row mx-0 width-100 align-items-center">
                                                <div class="col-auto pr-0 align-self-center">
                                                    <h6 class="font-weight-normal mb-2 mt-1" style="color: black;">{{karyawan}}</h6>
                                                    <div class="calendar-row">
                                                        <div class="col mt-1">
                                                            <p class="text-mute medium text-secondary mt-1">{{alasan_absensi}}</p>
                                                        </div>
                                                        <div class="col mx-2 mt-1">
                                                            <div class="chip mx-0">
                                                                <div class="chip-label">{{jumlah_hari}} hari</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <h6 class="text-mute mt-1"  style="color:gray">{{dari_tg}} - {{sampai_tg}}</6>
                                                </div>
                                            </div>
                                            </a>
                                        </div>
                                    </li>
                                {{/each}}
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="tab" id="tab33">
                    <div class="block mt-0">
                        <div class="list no-margin-vertical">
                            <ul>
                                {{#each diterima}}
                                    <li>
                                        <div class="card padding-vertical">
                                            <a href="/detailDitolak/">
                                            <div class="row mx-0 width-100 align-items-center">
                                                <div class="col-auto pr-0 align-self-center">
                                                    <h6 class="font-weight-normal mb-2 mt-1" style="color: black;">{{karyawan}}</h6>
                                                    <div class="calendar-row">
                                                        <div class="col mt-1">
                                                            <p class="text-mute medium text-secondary mt-1">{{alasan_absensi}}</p>
                                                        </div>
                                                        <div class="col mx-2 mt-1">
                                                            <div class="chip mx-0">
                                                                <div class="chip-label">{{jumlah_hari}} hari</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <h6 class="text-mute mt-1"  style="color:gray">{{dari_tg}} - {{sampai_tg}}</6>
                                                </div>
                                            </div>
                                            </a>
                                        </div>
                                    </li>
                                {{/each}}
                            </ul>
                        </div>  
                    </div>
                </div>
              </div>
        </div>
    </div>
</template>

<script>
    var app = this.$app;
    var self = this;

    function k () {
        var self = this;
            var app = self.$app;
            var $ = self.$;
            var key = false;
            g ();

            function g () {
                key = true;
                setTimeout(function () {
                    if(key){
                        console.log('Kembali lah boy - bouy');
                        app.views.main.router.back();
                        key = !key;
                    }else{
                        console.log('tidak ada');
                        key = !key;
                    }
                }, 2000)
            }
    }
    return{
        data: function(){
            return{
                menunggu:[
                {
                        id:'1',
                        tg_kirim:'06 Okt 2020',
                        wk_kirim:'15:32',
                        karyawan:'Deni Yudi',
                        alasan_absensi:'Sakit',
                        dari_tg:'05 Okt 2020',
                        sampai_tg:'08 Okt 2020',
                        desc:'-',
                        jumlah_hari:'12',
                        lampiran:'',
                        atasan:'Dreinhart',
                        ket_atasan:'-',
                        diterima:'08 Okt 2020',
                        status:'Menunggu'
                    },
                    {
                        id:'2',
                        tg_kirim:'08 Okt 2020',
                        wk_kirim:'14:32',
                        karyawan:'Rivai dunah',
                        alasan_absensi:'Sakit',
                        dari_tg:'05 Okt 2020',
                        sampai_tg:'10 Okt 2020',
                        desc:'-',
                        jumlah_hari:'5',
                        lampiran:'',
                        atasan:'Dreinhart',
                        ket_atasan:'-',
                        diterima:'08 Okt 2020',
                        status:'Menunggu'
                    }
                ],
                diterima:[
                    {
                        id:'1',
                        tg_kirim:'10 Okt 2020',
                        wk_kirim:'07:32',
                        karyawan:'Rahul achmad',
                        alasan_absensi:'Sakit',
                        dari_tg:'11 Okt 2020',
                        sampai_tg:'15 Okt 2020',
                        desc:'-',
                        jumlah_hari:'3',
                        lampiran:'',
                        atasan:'Dreinhart',
                        ket_atasan:'-',
                        diterima:'08 Okt 2020',
                        status:'Diterima'
                    }
                ],
                ditolak:[
                {
                        id:'1',
                        tg_kirim:'06 Okt 2020',
                        wk_kirim:'15:32',
                        karyawan:'Deni Yudi',
                        alasan_absensi:'Sakit',
                        dari_tg:'05 Okt 2020',
                        sampai_tg:'08 Okt 2020',
                        desc:'-',
                        jumlah_hari:'6',
                        lampiran:'',
                        atasan:'Dreinhart',
                        ket_atasan:'-',
                        ditolak:'08 Okt 2020',
                        status:'Ditolak'
                    }
                ]
            }

        },
        on:{
        pageInit:function(e,page){
            var self = this;
            var app = self.$app;
            var $ = self.$;
            var key = false;

            $('#back').on('click', function(){
                console.log('Kembali lah boy - bouy');
                key = true;
                setTimeout(function () {
                    if(key){
                        app.views.main.router.back();
                        key = !key;
                    }else{
                        console.log('tidak ada');
                        key = !key;
                    }
                }, 2000)
            });
        }
        }
        ,
        methods: {
        back:function(){
            var self = this;
            var app = self.$app;
            var $ = self.$;
            var key = false;
            g ();

            function g () {
                key = true;
                setTimeout(function () {
                    if(key){
                        console.log('Kembali lah boy - bouy');
                        app.views.main.router.back();
                        key = !key;
                    }else{
                        console.log('tidak ada');
                        key = !key;
                    }
                }, 2000)
            }
        },
      }
    }
</script>