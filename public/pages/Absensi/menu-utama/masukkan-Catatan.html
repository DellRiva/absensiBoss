<template>
    <div class="page light">
        <div class="navbar">
            <div class="navbar-inner">
                <a href="#" id="back" class="left back padding-left"><i class="material-icons link">arrow_back</i></a>
                <a href="" id="alert_back" hidden></a> 
                <div class="title">Masukkan log</div>
                <div class="right">
                    <a href="#" class="link icon-only" style="width: 130px;">
                        <button class="button bg-template text-color-white">Kirim</button>
                    </a>
                </div>
    
                <form data-search-container=".components-list" data-search-in="a" class="searchbar searchbar-expandable searchbar-components searchbar-init">
                    <div class="searchbar-inner">
                        <div class="searchbar-input-wrap">
                            <input type="search" placeholder="Search components" />
                            <i class="searchbar-icon"></i>
                            <span class="input-clear-button"></span>
                        </div>
                        <span class="searchbar-disable-button if-not-aurora"></span>
                    </div>
                </form>
            </div>
        </div>
        <div class="page-content">
            <div class="block mt-0 mb-0">
                <div class="row text-align-center">
                    <div class="col">
                        <div class="avatar avatar-120 no-shadow border-0 mt-2">
                            <img src="img/user2.png" @click="getpick" id="img-custom" alt="">
                            <input type="file" id="real-file-aq" @click="GAMBAR" accept=".jpg,.jpeg,.png" hidden="hidden"/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="block no-margin-vertical padding-vertical">
                <div class="list no-hairlines-md  no-margin-vertical">
                <ul>
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <div class="item-title item-label text-color-black" style="font-size: 15px;">Pilih Karyawan</div>
                            <div class="item-input-wrap"    aria-placeholder="Tidak terlipih"  >
                            <a class="item-link smart-select smart-select-init text-align-left" data-open-in="popover" data-page-title="Cabang">
                                <select name="pelanggaran">
                                    <option value="" disabled selected>Tidak terlipih</option>
                                <option value="Monolize">Fyorella</option>
                                <option value="MNZ Company">Rivai dunah</option>
                                <option value="MNZ Company">Dimas wahyu</option>
                                </select>
                                <div class="item-content no-padding-left">
                                <div class="item-inner l">
                                    <div class="item-title"></div>
                                    <div class="item-after no-margin-left no-padding-left"></div>
                                </div>
                                </div>
                            </a>
                            </div>
                        </div>
                    </li>
    
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <div class="item-title item-label text-color-black" style="font-size: 15px;">Tipe log</div>
                            <div class="item-input-wrap">
                            <a class="item-link smart-select smart-select-init text-align-left" data-open-in="popover" data-page-title="Tipe log">
                                <select name="pelanggaran">
                                    <option value="" disabled selected>Tidak terlipih</option>
                                <option value="Monolize">Overtime In</option>
                                <option value="MNZ Company">Check In</option>
                                <option value="MNZ Company">Break In</option>
                                </select>
                                <div class="item-content no-padding-left">
                                <div class="item-inner l">
                                    <div class="item-title"></div>
                                    <div class="item-after no-margin-left no-padding-left"></div>
                                </div>
                                </div>
                            </a>
                            </div>
                        </div>
                    </li>
    
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <div class="item-title item-label">Tanggal log</div>
                            <div class="item-input-wrap">
                            <input type="date" value="2014-04-30" placeholder="Please choose...">
                            </div>
                        </div>
                    </li>
    
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <div class="item-title item-label">Waktu log</div>
                            <div class="item-input-wrap">
                            <input type="time" value="09:10" placeholder="Please choose...">
                            </div>
                        </div>
                    </li>
    
                    <li class="item-content item-input">
                        <div class="item-inner">
                            <div class="item-title item-label">URL</div>
                            <div class="item-input-wrap">
                            <input type="url" placeholder="Deskripsi (optional)">
                            <span class="input-clear-button"></span>
                            </div>
                        </div>
                    </li>
                </ul>
                </div>
            </div>
        </div>
        <script>
            var self = this;
            var app = self.$app;
            var $ = self.$;
            var key = false;

            function k() {
                console.log('run');
                var back = document.getElementById("back");
                var alert_back = document.getElementById("alert_back");
                setTimeout(function () {
                    if (back == null && alert_back != null) {
                        console.log("alert back on");
                        webinterface.success();
                        webinterface.unsuccess()
                        back = null;
                        alert_back = null;
                    }else{
                        console.log("mech-01");
                        back.click();
                        back = null;
                        alert_back = null;
                    }
                }, 300)
            }
        </script>
    </div>
</template>
<script>
    return{
      on: {
        PageInit: function(e, page){
          const realFileBtn_aq = document.getElementById("real-file-aq");
            const customBtn_aq = document.getElementById("custom-button-aq");
            const customTxt_aq = document.getElementById("custom-text-aq");

            customBtn_aq.addEventListener("click", function() {
              realFileBtn_aq.click();
            });

            realFileBtn_aq.addEventListener("change", function() {
              if (realFileBtn_aq.files[0].type=='image/png') {
                customTxt_aq.innerHTML = realFileBtn_aq.value.match(
                  /[\/\\]([\w\d\s\.\-\(\)]+)$/
                )[1];
                document.getElementById('img-output').src = window.URL.createObjectURL(this.files[0]);
              } else if (realFileBtn_aq.files[0].type=='image/jpg') {
                customTxt_aq.innerHTML = realFileBtn_aq.value.match(
                  /[\/\\]([\w\d\s\.\-\(\)]+)$/
                )[1];
              } else if (realFileBtn_aq.files[0].type=='image/jpeg') {
                customTxt_aq.innerHTML = realFileBtn_aq.value.match(
                  /[\/\\]([\w\d\s\.\-\(\)]+)$/
                )[1];
              } else {
                customTxt_aq.innerHTML = "Belum ada gambar yang terpilih...";
              }
            });
        }
      },
      methods: {
        getpick:function(){
            var self = this;
            const input = document.getElementById("real-file-aq");
            input.click();
            self.GAMBAR();

        },
        GAMBAR: function(event) {
          document.getElementById("real-file-aq").onchange = function () {
              var reader = new FileReader();

              reader.onload = function (e) {
                  // get loaded data and render thumbnail.
                  document.getElementById("img-custom").src = e.target.result;
              };

              // read the image file as a data URL.
              reader.readAsDataURL(this.files[0]);
          };
        },
      }
    }
</script>