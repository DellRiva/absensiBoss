<template>
  <div class="page light">
      <div class="appbar">
          <div class="appbar-inner">
              <div class="left">
                  <a href="" class="link back icon-only">
                      <i class="material-icons" style="color: black;font-size: 30px;">close</i>
                      <span class="" style="color: black;font-size: 18px;">Area Cabang</span>
                  </a>
              </div>
          </div>
      </div>
  
      <div class="page-content">
        <!-- <div class="demo-map-container leaflet-container leaflet-touch leaflet-retina leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" style="height: 87%; position: relative; outline: none;" tabindex="0"><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(-31.7647px, 189.412px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-25px, -12px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(231px, -12px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-25px, 244px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/510/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-281px, -12px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/510/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-281px, 244px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(231px, 244px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/339.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-25px, -268px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/339.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(231px, -268px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-marker-pane"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(131038px, 86982.6px, 0px) scale(512);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"></div></div><div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(94.1176px, -230.672px, 0px);"><div class="leaflet-pane leaflet-tile-pane"><div class="leaflet-layer " style="z-index: 1; opacity: 1;"><div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(0px, 0px, 0px) scale(1);"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-10px, 146px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(246px, 146px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/339.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-10px, -110px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/339.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(246px, -110px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-10px, 402px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(246px, 402px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/510/341.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-266px, 402px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/511/342.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-10px, 658px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/510/340.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-266px, 146px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/510/342.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(-266px, 658px, 0px); opacity: 1;"><img alt="" role="presentation" src="https://api.tiles.mapbox.com/v4/mapbox.streets/10/512/342.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A" class="leaflet-tile leaflet-tile-loaded" style="width: 256px; height: 256px; backface-visibility: hidden; transform: translate3d(246px, 658px, 0px); opacity: 1;"></div></div></div><div class="leaflet-pane leaflet-shadow-pane"></div><div class="leaflet-pane leaflet-overlay-pane"></div><div class="leaflet-pane leaflet-marker-pane"></div><div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"></div><div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(130912px, 87403.2px, 0px) scale(512);"></div></div><div class="leaflet-control-container"><div class="leaflet-top leaflet-left"></div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div><div class="leaflet-bottom leaflet-right"></div></div></div> -->
        <div class="demo-map-container" style="height: 90%;"></div>
        <div class="menu" style="position: absolute; left: 0px; top: 6px">
          <div class="menu-inner">
            <div class="menu-item menu-item-dropdown" style="background-color:white;">
              <div class="menu-item-content icon-only">
                <i class="f7-icons" style="color:black;">layers_fill</i>
              </div>
              <div class="menu-dropdown menu-dropdown-left" style="background-color:white;">
                <div class="menu-dropdown-content" style="background-color:white;">
                  <a href="#" class="menu-dropdown-link menu-close text-color-black">Terrain</a>
                  <a href="#" class="menu-dropdown-link menu-close text-color-black">Satellite</a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="menu" style="position: absolute; right:0px; top: 6px">
          <div class="menu-inner">
            <a href="#" class="menu-item sheet-open" data-sheet=".demo-sheet-swipe-to-step" style="background-color: white;">
              <div class="menu-item-content icon-only">
                <i class="fas fa-crosshairs" style="color: black;"></i>
              </div>
            </a>
          </div>
        </div>
      </div>

      <!-- <div class="sheet-modal demo-sheet-swipe-to-step sheet-modal-push modal-in modal-in-swipe-step" style="height: auto; display: block; --f7-sheet-swipe-step:307.734px;">
          <div class="sheet-modal-inner">
            <div class="swipe-handler" @click="toggleSwipeStep"></div>
            <div class="sheet-modal-swipe-step">
              <div class="padding-horizontal padding-bottom-half">
                <h6>Monolize <br><p style="font-size: 14px; color: gray;">patraland</p></h6>
              </div>
            </div>
            <div class="list no-hairlines no-margin-vertical">
              <ul>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">Nomor ponsel <br></p><p class="no-margin-vertical" style="font-size: 18px;">085704293109</p><p></p>
                        </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">Nomor Telepone <br></p><p class="no-margin-vertical" style="font-size: 18px;">085704293109</p><p></p>
                        </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">ID Perangkat <br></p><p class="no-margin-vertical" style="font-size: 18px;">022013</p><p></p>
                        </div>
                  </div>
                </li>
                <li>
                  <div class="row padding-horizontal padding-vertical">
                    <div class="col">
                        <a href="#"
                         class="button button-raised button-fill button-large text-template padding-horizontal-half sheet-open" data-sheet=".demo-sheet-swipe-to-step" style="background-color: rgb(214, 193, 240); border-color: indigo;">UBAH</a>
                    </div> 
                    <div class="col">
                        <a href="#" class="button button-raised button-fill text-color-red button-large padding-horizontal-half sheet-open" data-sheet=".demo-sheet-swipe-to-step" style="background-color: rgb(248, 204, 204);">Hapus</a>
                    </div>                
                </div>
              </li>
              </ul>
            </div>
    
          </div>
        </div> -->

      <!-- <div class="sheet-modal demo-sheet-swipe-to-step" style="height:auto">
          <div class="sheet-modal-inner">
            <div class="swipe-handler" @click="toggleSwipeStep"></div>
            <div class="sheet-modal-swipe-step">
              <div class="padding-horizontal padding-bottom-half">
                <h6>MNZ Company <br><p style="font-size: 14px; color: gray;">patraland</p></h6>
              </div>
            </div>
            <div class="list no-hairlines no-margin-vertical">
              <ul>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">Nomor ponsel <br></p><p class="no-margin-vertical" style="font-size: 18px;">085704293109</p><p></p>
                        </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">Nomor Telepone <br></p><p class="no-margin-vertical" style="font-size: 18px;">085704293109</p><p></p>
                        </div>
                  </div>
                </li>
                <li class="item-content">
                  <div class="item-inner">
                      <div class="item-title">
                          <p class="no-margin-vertical" style="font-size: 12px;">ID Perangkat <br></p><p class="no-margin-vertical" style="font-size: 18px;">022013</p><p></p>
                        </div>
                  </div>
                </li>
                <li>
                  <div class="row padding-horizontal padding-vertical">
                    <div class="col">
                        <a href="#"
                         class="button button-raised button-fill button-large text-template padding-horizontal-half sheet-open"
                         data-sheet=".my-sheet-Tolak" style="background-color: rgb(214, 193, 240); border-color: indigo;">UBAH</a>
                    </div> 
                    <div class="col">
                        <a href="#" class="button button-raised button-fill text-color-red button-large padding-horizontal-half sheet-open"
                        data-sheet=".my-sheet-Izinkan" style="background-color: rgb(248, 204, 204); border-color: red;">Hapus</a>
                    </div>                
                </div>
              </li>
              </ul>
            </div>
    
          </div>
        </div> -->
        <script>
          var self = this;
          var app = self.$app;
          var $ = self.$;
          var key = false;
    
          function k() {
          console.log('run');
          var back = document.getElementById("back");
          setTimeout(function () {
            console.log("mech-01");
            back.click();
          }, 300)
      }
      </script>
      </div>
  </template>
  
  <script>
return {
  data() {
    return {
      mapStyleLoaded: false,
      mapScriptLoaded: false,
      mapInitialized: false,
    }
  },
  methods: {
  toggleSwipeStep: function () {
    var self = this;
    self.sheetSwipeToStep.stepToggle();
  },
    loadMapAssets: function () {
      var self = this;
      var style = document.createElement('link');
      style.rel = 'stylesheet';
      style.href = 'https://unpkg.com/leaflet@1.4.0/dist/leaflet.css';
      style.integrity='sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==';
      style.setAttribute('crossorigin', '')
      style.onload = function () {
        self.mapStyleLoaded = true;
        if (self.mapScriptLoaded) self.initMap();
      }
      document.head.appendChild(style);

      var script = document.createElement('script');
      script.src = 'https://unpkg.com/leaflet@1.4.0/dist/leaflet.js';
      script.integrity='sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==';
      script.setAttribute('crossorigin', '')
      script.onload = function () {
        self.mapScriptLoaded = true;
        if (self.mapStyleLoaded) self.initMap();
      }
      document.head.appendChild(script);
    },
    initMap: function () {
      var self = this;
      var mymap = L.map(self.$el.find('.demo-map-container')[0], { zoomControl: false }).setView([-7.920969, 112.6191526], 14);
      L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoibm9saW1pdHM0d2ViIiwiYSI6ImNqcXA4NTdmczBocm8zeG13Zm1zNTdyeDAifQ.HoJgmqQ_uH4zLyNJmiY98A', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a class="external" target="_blank" href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
          '<a class="external" target="_blank" href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
          'Imagery Â© <a class="external" target="_blank" href="https://www.mapbox.com/">Mapbox</a>',
        id: 'mapbox.streets'
      }).addTo(mymap);
      self.mapInitialized = true;
    },
  },
  on: {
      pageInit: function () {
      var self = this;
  //   self.sheetPush = self.$app.sheet.create({
  //     el: '.demo-sheet-push',
  //     push: true,
  //     backdrop: true,
  //   });
  //   self.sheetSwipeToClose = self.$app.sheet.create({
  //     el: '.demo-sheet-swipe-to-close',
  //     swipeToClose: true,
  //     push: true,
  //     backdrop: true,
  //   });
    self.sheetSwipeToStep = self.$app.sheet.create({
      el: '.demo-sheet-swipe-to-step',
      swipeToClose: false,
      swipeToStep: true,
      push: false,
      backdrop: false,
    });
  },
    pageAfterIn: function () {
      var self = this;
      if (self.mapInitialized) return;
      if (!window.L) {
        self.loadMapAssets();
        return;
      }
      self.initMap();
    },

    pageBeforeRemove: function () {
    var self = this;
    // Destroy sheet modal when page removed
  //   if (self.sheet) self.sheet.destroy();
  //   if (self.sheetPush) self.sheetPush.destroy();
  //   if (self.sheetSwipeToClose) self.sheetSwipeToClose.destroy();
  //   if (self.sheetSwipeToStep) self.sheetSwipeToStep.destroy();
  },
  },
}
</script>